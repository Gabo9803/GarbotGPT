<!DOCTYPE html>
<html lang="{% if current_user.is_authenticated %}{{ current_user.language }}{% else %}es{% endif %}" id="html-root" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GarBotGPT: Revoluciona tu mundo con IA conversacional avanzada. Aprende, crea y optimiza con GarolaCorp.">
    <meta name="keywords" content="GarBotGPT, GarolaCorp, inteligencia artificial, chatbot, IA conversacional, productividad, creatividad, educación">
    <meta name="author" content="GarolaCorp">
    <meta property="og:title" content="GarBotGPT - IA Conversacional del Futuro">
    <meta property="og:description" content="Transforma tu forma de trabajar y crear con GarBotGPT, la IA líder de GarolaCorp. ¡Prueba ahora!">
    <meta property="og:image" content="{{ url_for('static', filename='img/garbotgpt-og.jpg') }}">
    <meta property="og:url" content="{{ url_for('index', _external=True) }}">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "GarBotGPT",
        "url": "{{ url_for('index', _external=True) }}",
        "description": "Chatbot de IA avanzado para aprendizaje, productividad y creatividad.",
        "publisher": {
            "@type": "Organization",
            "name": "GarolaCorp"
        }
    }
    </script>
    <title>GarBotGPT - IA para Transformar tu Futuro</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Bootstrap CSS (para modales y acordeones) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Google Fonts: Manrope -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3B82F6;
            --secondary: #A855F7;
            --accent: #EC4899;
            --bg-light: #F9FAFB;
            --bg-dark: #1F2937;
            --text-light: #111827;
            --text-dark: #F3F4F6;
        }
        body {
            font-family: 'Manrope', sans-serif;
            @apply bg-[var(--bg-light)] dark:bg-[var(--bg-dark)] text-[var(--text-light)] dark:text-[var(--text-dark)] transition-all duration-300;
        }
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
        }
        .glass-effect {
            @apply bg-white/10 dark:bg-black/20 backdrop-blur-lg border border-white/20 rounded-xl shadow-lg;
        }
        .fab {
            @apply fixed bottom-6 right-6 p-4 bg-[var(--primary)] text-white rounded-full shadow-lg hover:bg-[var(--secondary)] transition-all duration-300;
        }
        .disabled-link {
            @apply text-gray-500 dark:text-gray-400 cursor-not-allowed relative;
        }
        .disabled-link:hover::after {
            content: 'Disponible Próximamente';
            @apply absolute inset-0 bg-black/80 text-white flex items-center justify-center text-sm font-medium rounded-xl;
        }
        [data-contrast="high"] {
            --bg-light: #000;
            --bg-dark: #000;
            --text-light: #FFF;
            --text-dark: #FFF;
            --primary: #60A5FA;
        }
        .chat-bubble {
            @apply p-4 rounded-lg max-w-xs;
        }
        .user-bubble {
            @apply bg-blue-100 dark:bg-blue-800 text-right ml-auto;
        }
        .ai-bubble {
            @apply bg-gray-200 dark:bg-gray-700 text-left mr-auto;
        }
    </style>
</head>
<body data-authenticated="{{ authenticated | lower }}" class="overflow-x-hidden" data-contrast="normal">
    <!-- Floating Action Button (FAB) -->
    <button id="fab" class="fab" aria-label="Acciones rápidas">
        <i class="fas fa-plus"></i>
    </button>
    <div id="fab-menu" class="hidden fixed bottom-20 right-6 flex flex-col gap-2">
        <button id="theme-toggle" class="p-3 bg-gray-800 text-white rounded-full hover:bg-[var(--secondary)]" aria-label="Alternar tema">
            <i class="fas fa-moon"></i>
        </button>
        <button id="contrast-toggle" class="p-3 bg-gray-800 text-white rounded-full hover:bg-[var(--secondary)]" aria-label="Alternar alto contraste">
            <i class="fas fa-eye"></i>
        </button>
        <a href="{{ url_for('chat') }}" class="p-3 bg-gray-800 text-white rounded-full hover:bg-[var(--secondary)]" aria-label="Ir al chat">
            <i class="fas fa-comment"></i>
        </a>
    </div>

    <!-- Header -->
    <header class="sticky top-0 z-50 glass-effect py-4">
        <div class="container mx-auto px-4 flex items-center justify-between">
            <a href="{{ url_for('index') }}" class="flex items-center space-x-2 text-2xl font-bold text-white">
                <img src="{{ url_for('static', filename='img/garbotgpt-logo.png') }}" alt="GarBotGPT Logo" class="h-10" loading="lazy">
                <span>GarBotGPT</span>
            </a>
            <nav class="hidden md:flex items-center space-x-6">
                <a href="#features" class="text-white hover:text-[var(--accent)] transition">Características</a>
                <a href="#pricing" class="text-white hover:text-[var(--accent)] transition">Precios</a>
                <a href="#faq" class="text-white hover:text-[var(--accent)] transition">FAQ</a>
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('chat') }}" class="text-white hover:text-[var(--accent)] transition">Chat</a>
                    <a href="{{ url_for('settings') }}" class="text-white hover:text-[var(--accent)] transition">Configuración</a>
                    <a href="{{ url_for('logout') }}" class="text-white hover:text-[var(--accent)] transition">Cerrar Sesión</a>
                    <span class="text-sm text-gray-300">
                        <i class="fas fa-user-circle mr-2"></i>{{ current_user.username }}
                    </span>
                {% else %}
                    <a href="{{ url_for('login') }}" class="text-white hover:text-[var(--accent)] transition">Iniciar Sesión</a>
                    <a href="{{ url_for('register') }}" class="px-4 py-2 bg-[var(--primary)] text-white rounded-full hover:bg-[var(--secondary)] transition">Regístrate</a>
                {% endif %}
                <select id="language-select" class="p-2 rounded bg-gray-800 text-white border border-gray-700" aria-label="Seleccionar idioma" aria-live="polite">
                    <option value="es" {% if current_user.language == 'es' %}selected{% endif %}>Español</option>
                    <option value="en" {% if current_user.language == 'en' %}selected{% endif %}>English</option>
                    <option value="ca" {% if current_user.language == 'ca' %}selected{% endif %}>Català</option>
                </select>
            </nav>
            <button id="mobile-menu-toggle" class="md:hidden text-white" aria-label="Abrir menú">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden fixed inset-0 bg-gray-900/95 z-50 flex flex-col items-center justify-center">
        <button id="mobile-menu-close" class="absolute top-4 right-4 text-white" aria-label="Cerrar menú">
            <i class="fas fa-times"></i>
        </button>
        <nav class="flex flex-col items-center space-y-6 text-xl">
            <a href="#features" class="text-white hover:text-[var(--accent)] transition">Características</a>
            <a href="#pricing" class="text-white hover:text-[var(--accent)] transition">Precios</a>
            <a href="#faq" class="text-white hover:text-[var(--accent)] transition">FAQ</a>
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('chat') }}" class="text-white hover:text-[var(--accent)] transition">Chat</a>
                <a href="{{ url_for('settings') }}" class="text-white hover:text-[var(--accent)] transition">Configuración</a>
                <a href="{{ url_for('logout') }}" class="text-white hover:text-[var(--accent)] transition">Cerrar Sesión</a>
            {% else %}
                <a href="{{ url_for('login') }}" class="text-white hover:text-[var(--accent)] transition">Iniciar Sesión</a>
                <a href="{{ url_for('register') }}" class="px-6 py-3 bg-[var(--primary)] text-white rounded-full hover:bg-[var(--secondary)] transition">Regístrate</a>
            {% endif %}
        </nav>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="container mx-auto mt-4" role="alert">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" data-aos="fade-up">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- Hero Section with Chat Demo -->
        <section class="min-h-screen gradient-bg flex items-center justify-center text-center py-16 px-4 relative overflow-hidden">
            <canvas id="particle-bg" class="absolute inset-0 z-0"></canvas>
            <div class="container mx-auto relative z-10">
                <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-6" data-aos="fade-up">
                    GarBotGPT: Tu Futuro, Ahora
                </h1>
                <p class="text-lg md:text-2xl text-gray-200 mb-8" data-aos="fade-up" data-aos-delay="100">
                    Transforma tu mundo con la IA conversacional de GarolaCorp.
                </p>
                <div class="flex justify-center gap-4 mb-12" data-aos="fade-up" data-aos-delay="200">
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('chat') }}" class="px-6 py-3 bg-[var(--primary)] text-white rounded-full hover:bg-[var(--secondary)] transition">Iniciar Chat</a>
                    {% else %}
                        <a href="{{ url_for('register') }}" class="px-6 py-3 bg-[var(--primary)] text-white rounded-full hover:bg-[var(--secondary)] transition">Regístrate Gratis</a>
                        <a href="{{ url_for('login') }}" class="px-6 py-3 bg-transparent border border-white text-white rounded-full hover:bg-white hover:text-[var(--primary)] transition">Iniciar Sesión</a>
                    {% endif %}
                </div>
                <!-- Chat Demo -->
                <div class="max-w-md mx-auto glass-effect p-6 rounded-xl" data-aos="zoom-in">
                    <div id="chat-demo" class="space-y-4">
                        <div class="chat-bubble user-bubble">Hola, ¿puedes explicarme la relatividad?</div>
                        <div class="chat-bubble ai-bubble">¡Claro! La relatividad de Einstein describe cómo el tiempo y el espacio se afectan por la velocidad y la gravedad. ¿Quieres un ejemplo?</div>
                        <div class="chat-bubble user-bubble">Sí, por favor.</div>
                        <div class="chat-bubble ai-bubble">Imagina un tren moviéndose cerca de la velocidad de la luz...</div>
                    </div>
                    <a href="{{ url_for('chat') }}" class="block mt-4 text-center text-blue-300 hover:text-blue-100">Probar Chat Ahora</a>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-16 px-4 bg-[var(--bg-light)] dark:bg-[var(--bg-dark)]">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-12" data-aos="fade-up">Lo Que Hace Único a GarBotGPT</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="glass-effect p-6 rounded-xl text-center" data-aos="fade-up" data-aos-delay="100">
                        <i class="fas fa-robot text-4xl text-[var(--primary)] mb-4"></i>
                        <h3 class="text-xl font-semibold mb-2">IA de Vanguardia</h3>
                        <p>Respuestas precisas y contextuales con modelos avanzados como GPT-4.</p>
                    </div>
                    <div class="glass-effect p-6 rounded-xl text-center" data-aos="fade-up" data-aos-delay="200">
                        <i class="fas fa-cog text-4xl text-[var(--primary)] mb-4"></i>
                        <h3 class="text-xl font-semibold mb-2">Personalización Total</h3>
                        <p>Configura modelos, temperatura y más para una experiencia a medida.</p>
                    </div>
                    <div class="glass-effect p-6 rounded-xl text-center" data-aos="fade-up" data-aos-delay="300">
                        <i class="fas fa-shield-alt text-4xl text-[var(--primary)] mb-4"></i>
                        <h3 class="text-xl font-semibold mb-2">Seguridad Garantizada</h3>
                        <p>Cifrado de punta a punta para proteger tus datos.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="py-16 px-4 gradient-bg text-white">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-12" data-aos="fade-up">Lo Que Dicen Nuestros Usuarios</h2>
                <div id="testimonial-carousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <div class="glass-effect p-6 rounded-xl text-center max-w-lg mx-auto">
                                <p class="mb-4">"GarBotGPT transformó mi forma de estudiar. ¡Explicaciones claras y rápidas!"</p>
                                <h4 class="font-semibold">Lucía M.</h4>
                                <p class="text-sm">Estudiante</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="glass-effect p-6 rounded-xl text-center max-w-lg mx-auto">
                                <p class="mb-4">"Un aliado perfecto para mi equipo de desarrollo. ¡Ahorra tiempo y esfuerzo!"</p>
                                <h4 class="font-semibold">Javier T.</h4>
                                <p class="text-sm">Desarrollador</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="glass-effect p-6 rounded-xl text-center max-w-lg mx-auto">
                                <p class="mb-4">"Escribir contenido creativo nunca fue tan fácil. ¡GarBotGPT es mi musa!"</p>
                                <h4 class="font-semibold">Sofía R.</h4>
                                <p class="text-sm">Escritora</p>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#testimonial-carousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Anterior</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#testimonial-carousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Siguiente</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="py-16 px-4 bg-[var(--bg-light)] dark:bg-[var(--bg-dark)]">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-12" data-aos="fade-up">Elige Tu Plan</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="glass-effect p-6 rounded-xl text-center" data-aos="fade-up" data-aos-delay="100">
                        <h3 class="text-2xl font-semibold mb-4">Gratuito</h3>
                        <p class="mb-4">Prueba GarBotGPT sin costo.</p>
                        <ul class="list-disc list-inside mb-6 text-left">
                            <li>100 mensajes/día</li>
                            <li>Acceso limitado a GPT-4</li>
                            <li>Soporte básico</li>
                        </ul>
                        <a href="{{ url_for('register') }}" class="px-6 py-3 bg-[var(--primary)] text-white rounded-full hover:bg-[var(--secondary)] transition">Comenzar Gratis</a>
                    </div>
                    <div class="glass-effect p-6 rounded-xl text-center relative" data-aos="fade-up" data-aos-delay="200">
                        <h3 class="text-2xl font-semibold mb-4">SuperGarBotGPT</h3>
                        <p class="mb-4">Ideal para usuarios frecuentes.</p>
                        <ul class="list-disc list-inside mb-6 text-left">
                            <li>1000 mensajes/día</li>
                            <li>Acceso completo a GPT-4</li>
                            <li>Soporte prioritario</li>
                        </ul>
                        <a href="https://garbotgpt.com" class="px-6 py-3 bg-[var(--primary)] text-white rounded-full disabled-link">Ver Detalles</a>
                    </div>
                    <div class="glass-effect p-6 rounded-xl text-center relative" data-aos="fade-up" data-aos-delay="300">
                        <h3 class="text-2xl font-semibold mb-4">Empresarial</h3>
                        <p class="mb-4">Perfecto para equipos.</p>
                        <ul class="list-disc list-inside mb-6 text-left">
                            <li>Mensajes ilimitados</li>
                            <li>API personalizada</li>
                            <li>Soporte dedicado</li>
                        </ul>
                        <a href="https://garbotgpt.com/api" class="px-6 py-3 bg-[var(--primary)] text-white rounded-full disabled-link">Contactar</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-16 px-4 gradient-bg text-white">
            <div class="container mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-12" data-aos="fade-up">Preguntas Frecuentes</h2>
                <div class="accordion" id="faq-accordion">
                    <div class="accordion-item glass-effect mb-4" data-aos="fade-up" data-aos-delay="100">
                        <h2 class="accordion-header" id="faq1">
                            <button class="accordion-button bg-transparent text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="true" aria-controls="collapse1">
                                ¿Qué es GarBotGPT?
                            </button>
                        </h2>
                        <div id="collapse1" class="accordion-collapse collapse show" aria-labelledby="faq1" data-bs-parent="#faq-accordion">
                            <div class="accordion-body">
                                GarBotGPT es un chatbot de IA avanzado para tareas educativas, creativas y profesionales, impulsado por GarolaCorp.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item glass-effect mb-4" data-aos="fade-up" data-aos-delay="200">
                        <h2 class="accordion-header" id="faq2">
                            <button class="accordion-button collapsed bg-transparent text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                                ¿Es gratuito?
                            </button>
                        </h2>
                        <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="faq2" data-bs-parent="#faq-accordion">
                            <div class="accordion-body">
                                Sí, ofrecemos un plan gratuito con cuotas limitadas. Visita <a href="https://garbotgpt.com" class="text-[var(--accent)]">garbotgpt.com</a> para más detalles.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item glass-effect mb-4" data-aos="fade-up" data-aos-delay="300">
                        <h2 class="accordion-header" id="faq3">
                            <button class="accordion-button collapsed bg-transparent text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
                                ¿Cómo protege mis datos?
                            </button>
                        </h2>
                        <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="faq3" data-bs-parent="#faq-accordion">
                            <div class="accordion-body">
                                Utilizamos cifrado de punta a punta y políticas de privacidad estrictas para garantizar la seguridad de tus datos.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="py-16 px-4 bg-[var(--bg-light)] dark:bg-[var(--bg-dark)] text-center">
            <div class="container mx-auto" data-aos="zoom-in">
                <h2 class="text-3xl md:text-4xl font-bold mb-6">Empieza Hoy con GarBotGPT</h2>
                <p class="text-lg mb-8">Únete a miles de usuarios que están transformando su futuro con IA.</p>
                <a href="{{ url_for('register') }}" class="px-8 py-4 bg-[var(--primary)] text-white rounded-full hover:bg-[var(--secondary)] transition text-lg">Regístrate Ahora</a>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="py-8 px-4 gradient-bg text-white">
        <div class="container mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <h5 class="text-lg font-semibold mb-4">GarBotGPT</h5>
                <p>Impulsado por GarolaCorp, tu compañero de IA para aprendizaje, productividad y creatividad.</p>
            </div>
            <div>
                <h5 class="text-lg font-semibold mb-4">Enlaces</h5>
                <ul class="space-y-2">
                    <li><a href="{{ url_for('index') }}" class="hover:text-[var(--accent)]">Inicio</a></li>
                    <li><a href="{{ url_for('chat') }}" class="hover:text-[var(--accent)]">Chat</a></li>
                    <li><a href="#faq" class="hover:text-[var(--accent)]">FAQ</a></li>
                    <li><a href="https://garbotgpt.com/api" class="disabled-link">API</a></li>
                </ul>
            </div>
            <div>
                <h5 class="text-lg font-semibold mb-4">Recursos</h5>
                <ul class="space-y-2">
                    <li><a href="#" class="disabled-link">Documentación</a></li>
                    <li><a href="#" class="disabled-link">Blog</a></li>
                    <li><a href="#" class="disabled-link">Comunidad</a></li>
                </ul>
            </div>
            <div>
                <h5 class="text-lg font-semibold mb-4">Síguenos</h5>
                <div class="flex space-x-4">
                    <a href="https://x.com" class="hover:text-[var(--accent)]"><i class="fab fa-twitter"></i></a>
                    <a href="https://linkedin.com" class="hover:text-[var(--accent)]"><i class="fab fa-linkedin"></i></a>
                    <a href="https://github.com" class="hover:text-[var(--accent)]"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
        <p class="text-center mt-8">© 2025 GarBotGPT. Desarrollado por GarolaCorp.</p>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/12.0.2/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/framer-motion/10.12.16/motion.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        hljs.highlightAll();
        AOS.init({ duration: 800, once: true });

        document.addEventListener('DOMContentLoaded', () => {
            // FAB Menu
            const fab = document.getElementById('fab');
            const fabMenu = document.getElementById('fab-menu');
            fab.addEventListener('click', () => {
                fabMenu.classList.toggle('hidden');
                fab.querySelector('i').classList.toggle('fa-plus');
                fab.querySelector('i').classList.toggle('fa-times');
            });

            // Theme and Contrast Toggle
            const html = document.getElementById('html-root');
            const themeToggle = document.getElementById('theme-toggle');
            const contrastToggle = document.getElementById('contrast-toggle');
            themeToggle.addEventListener('click', () => {
                html.dataset.theme = html.dataset.theme === 'light' ? 'dark' : 'light';
                themeToggle.querySelector('i').classList.toggle('fa-moon');
                themeToggle.querySelector('i').classList.toggle('fa-sun');
            });
            contrastToggle.addEventListener('click', () => {
                html.dataset.contrast = html.dataset.contrast === 'normal' ? 'high' : 'normal';
            });

            // Mobile Menu
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuClose = document.getElementById('mobile-menu-close');
            mobileMenuToggle.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            mobileMenuClose.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });

            // Language Select
            const languageSelect = document.getElementById('language-select');
            languageSelect.addEventListener('change', (e) => {
                window.location.href = `/set_language?lang=${e.target.value}`;
            });

            // Chat Demo Animation
            const chatBubbles = document.querySelectorAll('#chat-demo .chat-bubble');
            chatBubbles.forEach((bubble, index) => {
                setTimeout(() => {
                    bubble.style.opacity = '1';
                    bubble.style.transform = 'translateY(0)';
                }, index * 1000);
            });

            // Particle Background
            const canvas = document.getElementById('particle-bg');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const ctx = canvas.getContext('2d');
            const particles = [];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 2 + 1,
                    vx: Math.random() * 2 - 1,
                    vy: Math.random() * 2 - 1
                });
            }
            function animateParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                    ctx.fill();
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                });
                requestAnimationFrame(animateParticles);
            }
            animateParticles();
        });
    </script>
</body>
</html>